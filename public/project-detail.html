<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Project Detail | Test This For Me</title>
    <link href="https://fonts.googleapis.com/css?family=Lato:700" rel="stylesheet">
    <link rel="shortcut icon" href="./assets/img/favicon.ico" type="image/x-icon">
    <link rel="icon" href="./assets/img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen" href="./assets/css/style.css" />

</head>

<body>
    <main>
        <nav>
            <!--Beginning Main Nav -->
            <div class="nav-wrapper grey lighten-4">
                <div class="container">
                    <a href="#!" class="brand-logo">
                        <img id="ttfmLogo" src="./assets/img/ttfm-logo-clr.svg" alt="TestThisForMe Logo" width="50">
                        <span id="navTitle">TestThisFor.Me</span>
                    </a>
                    <ul class="right hide-on-med-and-down indigo-text text-darken-4">
                        <li>
                            <a href="#">Available Projects</a>
                        </li>
                        <li>
                            <a href="#">My Projects</a>
                        </li>
                        <li>
                            <a href="#">My Profile</a>
                        </li>
                        <li>
                            <a href="#">Login/Sign Up</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <ul class="sidenav" id="mobile-demo">
            <!--Mobile Main Nav -->
            <li>
                <a href="#">Available Projects</a>
            </li>
            <li>
                <a href="#">My Projects</a>
            </li>
            <li>
                <a href="#">My Profile</a>
            </li>
            <li>
                <a href="#">Login/Sign Up</a>
            </li>
        </ul>
        <!--End Main Nav -->

        <!-- My Project Dashboard -->
        <div class="dash container">
            <img class="circle" src="./assets/img/profile.jpg">
            <h4 class="avail">Question Title Goes Here</h4>
            <p>Lorem ipsum dolor amet coloring book synth hella literally brooklyn enamel pin af meditation palo santo readymade
                kickstarter celiac snackwave. Chartreuse stumptown +1 kale chips iPhone. Ennui lyft health goth organic fixie
                vegan. Glossier cardigan actually pinterest beard.</p>
            <p>Hammock forage scenester crucifix try-hard drinking vinegar chillwave taiyaki. Hammock fanny pack raclette meh
                woke +1. Biodiesel ethical post-ironic four loko. Slow-carb trust fund dreamcatcher four dollar toast, skateboard
                marfa tumeric.</p>
            <pre>
                var names = ["Mike","Matt","Nancy","Adam","Jenny","Nancy","Carl"]; 
            </pre>
            <div class="divider"></div>
            <h5>Comments</h5>
            <div class="comment-entry row">
                <form class="col s12">
                    <div class="row">
                        <div class="input-field col s12">
                            <i class="material-icons prefix">account_circle</i>
                            <textarea id="textarea1" class="materialize-textarea"></textarea>
                            <label for="textarea1">Post Your Solution</label>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- Modal Trigger -->
        <a class="waves-effect waves-light btn modal-trigger" href="#repoPicker">Modal</a>

        <!-- Modal Structure -->
        <div id="repoPicker" class="modal modal-fixed-footer">
            <div class="modal-content">
                <h4>Choose a Repository</h4>
                <!-- <div class="card" style="padding: 5px 10px 5px 30px;" data-repo="http://github.com" data-hosted="https://google.com">
                    <h6 class="title">Repo Name</h6>
                    <p>Some details maybe</p>
                </div>
                <div class="card" style="padding: 5px 10px 5px 30px;">
                    <h6>Repo Name</h6>
                    <p>Some details maybe</p>
                </div>
                <div class="card" style="padding: 5px 10px 5px 30px;">
                    <h6>Repo Name</h6>
                    <p>Some details maybe</p>
                </div>
                <div class="card" style="padding: 5px 10px 5px 30px;">
                    <h6>Repo Name</h6>
                    <p>Some details maybe</p>
                </div>
                <div class="card" style="padding: 5px 10px 5px 30px;">
                    <h6>Repo Name</h6>
                    <p>Some details maybe</p>
                </div> -->

            </div>
            <div class="modal-footer">
                <a href="#!" class="waves-effect waves-green btn">Choose</a>
                <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
            </div>
        </div>


    </main>
    <!--End of Footer -->
    <footer class="page-footer black main">
        <div class="footer-copyright">
            <div class="container">
                Â©2018 Copyright TestThisFor.Me, All rights reserved. Tyler Jenkins, Allan Jones, and Grace Ho
                <a class="grey-text text-lighten-4 right" href="https://github.com/TyPhyter/TestThisFor.Me" target="_blank">View Code</a>
            </div>
        </div>
    </footer>

    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
    <script type="text/javascript" src="./assets/js/main.js"></script>
    <script>
        sessionStorage.setItem('ttfmgithubAlias', 'TyPhyter');
        var githubAlias = sessionStorage.getItem('ttfmgithubAlias');
        var repos;
        if (githubAlias) {
            fetch(`https://api.github.com/users/${githubAlias}/repos?sort="updated"`)
                .then((response) => {
                    return response.json();
                })
                .then((json) => {
                    repos = json;
                    console.log(repos);
                    var modalContent = document.querySelector('#repoPicker .modal-content');
                    for (var i = 0; i < repos.length; i++) {
                        var newCard = document.createElement('div');
                        newCard.classList.add('card');
                        var cardTitle = document.createElement('h6');
                        cardTitle.textContent = repos[i].full_name;
                        var cardDetail = document.createElement('p');
                        cardDetail.textContent = "Updated at:" + repos[i].updated_at;
                        newCard.appendChild(cardTitle);
                        newCard.appendChild(cardDetail);
                        newCard.setAttribute('data-index', i);
                        modalContent.appendChild(newCard);
                    }
                });
        }
        document.addEventListener('DOMContentLoaded', function () {
            var elems = document.querySelectorAll('.modal');
            var instances = M.Modal.init(elems);
        });
        var selectedRepo = {};
        document.addEventListener('click', function (evt) {
            if (evt.target.classList.contains('card')) {
                var targetRepoCard = evt.target;
                console.log(targetRepoCard);
                selectedRepo = repos[targetRepoCard.getAttribute('data-index')];
                var textArea = document.querySelector('#textarea1');
                var label = document.querySelector('label[for="textarea1"]');
                label.classList.add('active');
                textArea.value = selectedRepo.homepage;
            } else if (evt.target.parentNode.classList.contains('card')) {
                var targetRepoCard = evt.target.parentNode;
                console.log(targetRepoCard);
                selectedRepo = repos[targetRepoCard.getAttribute('data-index')];
                var textArea = document.querySelector('#textarea1');
                var label = document.querySelector('label[for="textarea1"]');
                label.classList.add('active');
                textArea.value = selectedRepo.homepage;
            }

        });
    </script>
</body>

</html>